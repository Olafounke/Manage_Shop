<main>
  <h2>Inscription</h2>
  <form #signupForm="ngForm" (ngSubmit)="onSubmit(signupForm)">
    <div class="form-group">
      <label for="email">Email *</label>
      <input
        type="email"
        id="email"
        #emailInput="ngModel"
        [(ngModel)]="email"
        name="email"
        required
        email
      />
      <div
        class="validation-error"
        *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)"
      >
        <p *ngIf="emailInput.errors?.['required']">L'email est requis</p>
        <p *ngIf="emailInput.errors?.['email']">
          Veuillez entrer un email valide
        </p>
      </div>
    </div>

    <div class="form-group">
      <label for="firstName">Prénom</label>
      <input
        type="text"
        id="firstName"
        [(ngModel)]="firstName"
        name="firstName"
      />
    </div>

    <div class="form-group">
      <label for="lastName">Nom</label>
      <input type="text" id="lastName" [(ngModel)]="lastName" name="lastName" />
    </div>

    <div class="form-group">
      <label for="password">Mot de passe *</label>
      <input
        type="password"
        id="password"
        #passwordInput="ngModel"
        [(ngModel)]="password"
        name="password"
        required
        minlength="6"
      />
      <div
        class="validation-error"
        *ngIf="
          passwordInput.invalid &&
          (passwordInput.dirty || passwordInput.touched)
        "
      >
        <p *ngIf="passwordInput.errors?.['required']">
          Le mot de passe est requis
        </p>
        <p *ngIf="passwordInput.errors?.['minlength']">
          Le mot de passe doit contenir au moins 6 caractères
        </p>
      </div>
    </div>

    <p class="success-message" *ngIf="successMessage">{{ successMessage }}</p>
    <p class="error-message" *ngIf="errorMessage">{{ errorMessage }}</p>

    <div class="form-footer">
      <app-button
        [config]="{
          style: 'default',
          type: 'submit',
          size: 'big',
          display: 'text',
          disabled: !signupForm.form.valid,
          text: 'S\'inscrire',
        }"
      />
      <p class="required-fields" *ngIf="!signupForm.form.valid">
        * Champs obligatoires
      </p>
    </div>
  </form>
</main>
